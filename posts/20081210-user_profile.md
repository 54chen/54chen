title: user_profile
link: http://www.54chen.com/life/user_profile.html
author: cc0cc
description: 
post_id: 292
created: 2008/12/10 11:07:05
created_gmt: 2008/12/10 03:07:05
comment_status: open
post_name: user_profile
status: private
post_type: post

# user_profile

\-- Table: user_profile   \-- DROP TABLE user_profile;   CREATE TABLE user_profile (   id bigint NOT NULL,   yuid character varying(512) NOT NULL DEFAULT ''::character varying,   nick character varying(512) NOT NULL DEFAULT ''::character varying,   status character varying(512) DEFAULT NULL::character varying,   picurl character varying(1024) DEFAULT NULL::character varying,   birthday character varying(20) DEFAULT NULL::character varying,   gender character varying(5) DEFAULT NULL::character varying,   hobby character varying(512) DEFAULT NULL::character varying,   website character varying(512) DEFAULT NULL::character varying,   email character varying(128) DEFAULT NULL::character varying,   othermail text,   ymsg character varying(128) DEFAULT NULL::character varying,   msn character varying(128) DEFAULT NULL::character varying,   qq character varying(64) DEFAULT NULL::character varying,   mobile character varying(13) DEFAULT NULL::character varying,   telephone character varying(50) DEFAULT NULL::character varying,   address character varying(512) DEFAULT NULL::character varying,   gtalk character varying(128) DEFAULT NULL::character varying,   flag character(1) DEFAULT NULL::bpchar,   source integer,   activate character(1) DEFAULT 'A'::bpchar,   aliwangwang character varying(128) NOT NULL DEFAULT ''::character varying,   city character varying(512) DEFAULT NULL::character varying,   introducer integer NOT NULL DEFAULT 0,   othernick character varying(60) DEFAULT NULL::character varying,   ymail character varying(128) DEFAULT NULL::character varying,   fid character varying(50) DEFAULT NULL::character varying,   workexp hstore[],   collegeexp hstore[],   schoolexp hstore[],   picurl_mid character varying(1024),   picurl_ori character varying(1024),   CONSTRAINT user_profile_pkey PRIMARY KEY (id) ) WITH (OIDS=FALSE); ALTER TABLE user_profile OWNER TO yahoo;   \-- Index: idx_birthday   \-- DROP INDEX idx_birthday;   CREATE INDEX idx_birthday   ON user_profile   USING btree   (birthday);   \-- Index: idx_city   \-- DROP INDEX idx_city;   CREATE INDEX idx_city   ON user_profile   USING btree   (city);   \-- Index: idx_collegeexp   \-- DROP INDEX idx_collegeexp;   CREATE INDEX idx_collegeexp   ON user_profile   USING ink   (to_tsvector('chinesecfg'::regconfig, to_string(collegeexp)));   \-- Index: idx_email   \-- DROP INDEX idx_email;   CREATE INDEX idx_email   ON user_profile   USING btree   (email);   \-- Index: idx_gender   \-- DROP INDEX idx_gender;   CREATE INDEX idx_gender   ON user_profile   USING btree   (gender);   \-- Index: idx_gtalk   \-- DROP INDEX idx_gtalk;   CREATE INDEX idx_gtalk   ON user_profile   USING btree   (gtalk);   \-- Index: idx_mobile   \-- DROP INDEX idx_mobile;   CREATE INDEX idx_mobile   ON user_profile   USING btree   (mobile);   \-- Index: idx_msn   \-- DROP INDEX idx_msn;   CREATE INDEX idx_msn   ON user_profile   USING btree   (msn);   \-- Index: idx_nick   \-- DROP INDEX idx_nick;   CREATE INDEX idx_nick   ON user_profile   USING ink   (to_tsvector('swordsegcfg'::regconfig, COALESCE(nick, ''::character varying)::text));   \-- Index: idx_othernick   \-- DROP INDEX idx_othernick;   CREATE INDEX idx_othernick   ON user_profile   USING ink   (to_tsvector('swordsegcfg'::regconfig, COALESCE(othernick, ''::character varying)::text));   \-- Index: idx_qq   \-- DROP INDEX idx_qq;   CREATE INDEX idx_qq   ON user_profile   USING btree   (qq);   \-- Index: idx_schoolexp   \-- DROP INDEX idx_schoolexp;   CREATE INDEX idx_schoolexp   ON user_profile   USING ink   (to_tsvector('chinesecfg'::regconfig, to_string(schoolexp)));   \-- Index: idx_telephone   \-- DROP INDEX idx_telephone;   CREATE INDEX idx_telephone   ON user_profile   USING btree   (telephone);   \-- Index: idx_workexp   \-- DROP INDEX idx_workexp;   CREATE INDEX idx_workexp   ON user_profile   USING ink   (to_tsvector('chinesecfg'::regconfig, to_string(workexp)));   \-- Index: idx_ymsg   \-- DROP INDEX idx_ymsg;   CREATE INDEX idx_ymsg   ON user_profile   USING btree   (ymsg);   \-- Index: idx_yuid   \-- DROP INDEX idx_yuid;   CREATE UNIQUE INDEX idx_yuid   ON user_profile   USING btree   (yuid);     \-- Rule: "replace_user_profile ON user_profile"   \-- DROP RULE replace_user_profile ON user_profile;   CREATE OR REPLACE RULE replace_user_profile AS     ON INSERT TO user_profile    WHERE (EXISTS ( SELECT 1            FROM user_profile           WHERE user_profile.id = new.id)) DO INSTEAD  UPDATE user_profile SET nick = new.nick, status = new.status, picurl = new.picurl, picurl_mid = new.picurl_mid, picurl_ori = new.picurl_ori, birthday = new.birthday, gender = new.gender, hobby = new.hobby, website = new.website, email = new.email, othermail = new.othermail, ymsg = new.ymsg, msn = new.msn, qq = new.qq, mobile = new.mobile, telephone = new.telephone, address = new.address, gtalk = new.gtalk, flag = new.flag, source = new.source, activate = new.activate, aliwangwang = new.aliwangwang, city = new.city, introducer = new.introducer, othernick = new.othernick, ymail = new.ymail, fid = new.fid   WHERE user_profile.id = new.id;     \-- Trigger: recom_upworkexp_trigger on user_profile   \-- DROP TRIGGER recom_upworkexp_trigger ON user_profile;   CREATE TRIGGER recom_upworkexp_trigger   BEFORE UPDATE   ON user_profile   FOR EACH ROW   EXECUTE PROCEDURE updateorgnames();